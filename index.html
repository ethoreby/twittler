<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>
	
      $(document).ready(function(){
        var $body = $('body');
        //$body.html('');

		//debugger;
		
        var index = streams.home.length - 1;
		var prevTime;
		var prevLength = 0;
		
		var refreshTweets = function() {
			var length = streams.home.length;
			index = prevLength;
			
			while(index < length){
				var tweet = streams.home[index];
				var $tweet = $('<div></div>');
				$tweet.text('@' + tweet.user + ': ' + tweet.message);
				$("h1").first().after($tweet);
				while($("div").length > 15) {	//allow only newest 15 tweets
					$("div").last().remove();
				}
				index++;
			}
			prevLength = streams.home.length;
		}
		
		$(".refresh").on("click", function() {
			refreshTweets();
		});
		
		refreshTweets();	//initial refresh to populate page
      });
    </script>
	
	<button class="refresh">Refresh Tweets</button>
	<h1>your feed:</h1>
	
  </body>
</html>
