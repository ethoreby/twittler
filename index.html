<!DOCTYPE html>
<html>
  <head>
	<link rel="stylesheet" href="twittler_css.css" type="text/css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	
	<title>Twittler</title>
  </head>
  <body>
    <script>
	
      $(document).ready(function(){
		
        var index = streams.home.length - 1;
		var prevTime;
		var prevLength = 0;
		
		var refreshTweets = function() {
			var length = streams.home.length;
			index = prevLength;
			
			while(index < length){
				var tweet = streams.home[index];
				var options = {
					year: "numeric", month: "numeric",
					day: "numeric", hour: "numeric", minute: "2-digit"
				};
				
				var user = "<span class='tweet_user'>@" + tweet.user + "</span> : ";
				var message = "<span class='tweet_message'>" + tweet.message + "</span>"
				var timestamp = "<div class='tweet_timestamp'>" + tweet.created_at.toLocaleTimeString("en-US", options); + "</div>";
				var builtTweet = "<div class='tweet'>" + user + message + timestamp + "</div>";
				$("#center_offset").after(builtTweet);
				while($(".tweet").length > 12) {	//allow only newest 15 tweets
					$(".tweet").last().remove();
				}
				index++;
			}
			prevLength = streams.home.length;
		}
		
		$(".refresh").on("click", function() {
			refreshTweets();
		});
		
		refreshTweets();	//initial refresh to populate page
      });
    </script>
	
	<div id="header">
		<img id="logo" src="twittler_logo.png" height="60px"><h1>Twittler</h1>
	</div>
	
	<div id="content">
		<button class="refresh">Refresh Tweets</button>
		<div id="center_offset">
			<h1 id="feed_header">Your Feed:</h1>
		</div>
	</div>
	
  </body>
</html>
